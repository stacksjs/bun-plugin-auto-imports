# API Reference

Complete API reference for bun-plugin-auto-imports.

## Exports

### autoImports

Create the Bun plugin for auto-imports.

```typescript
import { autoImports } from 'bun-plugin-auto-imports'

const plugin = autoImports(options: Partial<AutoImportsOptions>): AutoImportsPlugin
```

### generateESLintGlobals

Generate ESLint globals configuration from TypeScript declarations.

```typescript
import { generateESLintGlobals } from 'bun-plugin-auto-imports'

const config = generateESLintGlobals(
  dtsContent: string,
  options: ESLintOptions
): string
```

### generatePickierGlobals

Generate Pickier globals configuration.

```typescript
import { generatePickierGlobals } from 'bun-plugin-auto-imports'

const config = generatePickierGlobals(
  dtsContent: string,
  options: PickierOptions
): string
```

### getAutoImportedIdentifiers

Extract auto-imported identifiers from declaration content.

```typescript
import { getAutoImportedIdentifiers } from 'bun-plugin-auto-imports'

const identifiers = getAutoImportedIdentifiers(dtsContent: string): string[]
```

### GENERATED_COMMENT

Comment added to generated files.

```typescript
import { GENERATED_COMMENT } from 'bun-plugin-auto-imports'

// '// Generated by bun-plugin-auto-imports\n'
```

## Types

### AutoImportsOptions

Main configuration options for the plugin.

```typescript
import type { AutoImportsOptions } from 'bun-plugin-auto-imports'

interface AutoImportsOptions extends Partial<UnimportOptions> {
  /**
   * Path to generate TypeScript declaration file
   * @default './auto-imports.d.ts'
   */
  dts?: string | false

  /**
   * ESLint integration configuration
   */
  eslint?: ESLintOptions

  /**
   * Pickier integration configuration
   */
  pickier?: PickierOptions

  /**
   * Directories to scan for exports
   */
  dirs?: (string | ScanDir)[]

  /**
   * Enable debug logging
   * @default false
   */
  debug?: boolean
}
```

### ScanDir

Configuration for directory scanning.

```typescript
interface ScanDir {
  /**
   * Path to the directory to scan
   */
  path: string

  /**
   * Whether to scan for type exports
   * @default true
   */
  types?: boolean

  /**
   * File patterns to include
   * @default ['**/*.{ts,tsx,js,jsx}']
   */
  include?: string[]

  /**
   * File patterns to exclude
   * @default ['**/*.d.ts', '**/node_modules/**']
   */
  exclude?: string[]
}
```

### ESLintOptions

ESLint configuration options.

```typescript
interface ESLintOptions {
  /**
   * Enable ESLint configuration generation
   * @default false
   */
  enabled?: boolean

  /**
   * Filepath for ESLint globals config
   * @default './.eslint-auto-import.json'
   */
  filepath?: string

  /**
   * Value for globals properties
   * @default true
   */
  globalsPropValue?: ESLintGlobalsPropValue
}

type ESLintGlobalsPropValue =
  | boolean
  | 'readonly'
  | 'readable'
  | 'writable'
  | 'writeable'
```

### PickierOptions

Pickier configuration options.

```typescript
interface PickierOptions {
  /**
   * Enable Pickier configuration generation
   * @default false
   */
  enabled?: boolean

  /**
   * Filepath for Pickier globals config
   * @default './.pickier-auto-import.json'
   */
  filepath?: string

  /**
   * Value for globals properties
   * @default 'readonly'
   */
  globalsPropValue?: PickierGlobalsPropValue
}

type PickierGlobalsPropValue = 'readonly' | 'writable'
```

### AutoImportsPlugin

Plugin interface returned by autoImports.

```typescript
interface AutoImportsPlugin {
  name: string
  setup: (builder: PluginBuilder) => Promise<void>
}
```

## UnimportOptions

Options inherited from unimport:

```typescript
interface UnimportOptions {
  /**
   * Presets to use
   */
  presets?: (string | Preset)[]

  /**
   * Custom imports
   */
  imports?: Import[]

  /**
   * Directories to scan
   */
  dirs?: (string | ScanDir)[]

  /**
   * Path for TypeScript declarations
   */
  dts?: string | false

  /**
   * Additional options...
   */
}
```

### Import

Import definition:

```typescript
interface Import {
  /**
   * Name of the export to import
   */
  name: string

  /**
   * Local name (alias)
   */
  as?: string

  /**
   * Package or path to import from
   */
  from: string

  /**
   * Whether this is a type import
   */
  type?: boolean
}
```

## Usage Examples

### Basic Plugin Registration

```typescript
import { plugin } from 'bun'
import { autoImports } from 'bun-plugin-auto-imports'

plugin(autoImports({
  presets: ['vue'],
  dts: './auto-imports.d.ts'
}))
```

### Full Configuration

```typescript
import type { AutoImportsOptions } from 'bun-plugin-auto-imports'
import { plugin } from 'bun'
import { autoImports } from 'bun-plugin-auto-imports'

const options: AutoImportsOptions = {
  presets: ['vue', '@vueuse/core'],

  imports: [
    { name: 'z', from: 'zod' },
    { name: 'clsx', from: 'clsx' },
    { name: 'default', as: 'axios', from: 'axios' }
  ],

  dirs: [
    './src/utils',
    {
      path: './src/composables',
      types: true,
      exclude: ['**/*.test.ts']
    }
  ],

  dts: './src/auto-imports.d.ts',

  eslint: {
    enabled: true,
    filepath: './.eslint-auto-import.json',
    globalsPropValue: 'readonly'
  },

  debug: false
}

plugin(autoImports(options))
```

### Generating ESLint Config Manually

```typescript
import { generateESLintGlobals } from 'bun-plugin-auto-imports'

const dtsContent = await Bun.file('./auto-imports.d.ts').text()

const eslintConfig = generateESLintGlobals(dtsContent, {
  enabled: true,
  globalsPropValue: 'readonly'
})

await Bun.write('./.eslint-auto-import.json', eslintConfig)
```

## File Loading

The plugin hooks into Bun's file loader:

```typescript
// What the plugin does internally
builder.onLoad({ filter: /.*/ }, async (args) => {
  const content = await Bun.file(args.path).text()
  const transformed = await injectImports(content)

  return {
    contents: transformed.code,
    loader: getLoader(args.path)
  }
})
```

## Generated Declaration Format

```typescript
// auto-imports.d.ts
// Generated by bun-plugin-auto-imports

export {}
declare global {
  // From presets
  const ref: typeof import('vue')['ref']
  const computed: typeof import('vue')['computed']

  // From custom imports
  const z: typeof import('zod')['z']

  // From directory scanning
  const myUtil: typeof import('./src/utils/myUtil')['myUtil']
}
```
